CFLAGS= -Wall -Wextra -Wpedantic --std=c89
TRASH= $(shell if which trash 2>/dev/null 1>&2; then echo trash; else echo rm; fi)

autogenerated.o: autogenerated.c
	cc $(CFLAGS) -c autogenerated.c -o autogenerated.o

autogenerated.c: example
	./example

example: example.c core.h
	cc $(CFLAGS) example.c -o example

clean:
	if [ -e example ];          then $(TRASH) example;       	fi
	if [ -e autogenerated.c ];  then $(TRASH) autogenerated.c;	fi
	if [ -e autogenerated.o ];  then $(TRASH) autogenerated.o;	fi
